\hypertarget{G4XrayBoundaryProcess_8hh_source}{}\doxysection{G4\+Xray\+Boundary\+Process.\+hh}
\label{G4XrayBoundaryProcess_8hh_source}\index{/biomaps/physique/appli/GateOlga/src/source/physics/include/G4XrayBoundaryProcess.hh@{/biomaps/physique/appli/GateOlga/src/source/physics/include/G4XrayBoundaryProcess.hh}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{2 \textcolor{comment}{   Copyright (C): OpenGATE Collaboration}}
\DoxyCodeLine{3 \textcolor{comment}{}}
\DoxyCodeLine{4 \textcolor{comment}{This software is distributed under the terms}}
\DoxyCodeLine{5 \textcolor{comment}{of the GNU Lesser General  Public Licence (LGPL)}}
\DoxyCodeLine{6 \textcolor{comment}{See GATE/LICENSE.txt for further details}}
\DoxyCodeLine{7 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/*/}}
\DoxyCodeLine{8 }
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifndef G4XrayBoundaryProcess\_h}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define G4XrayBoundaryProcess\_h 1}}
\DoxyCodeLine{18 }
\DoxyCodeLine{20 \textcolor{comment}{// Includes}}
\DoxyCodeLine{22 \textcolor{comment}{}}
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}G4Step.hh"{}}}
\DoxyCodeLine{24 \textcolor{preprocessor}{\#include "{}G4VDiscreteProcess.hh"{}}}
\DoxyCodeLine{25 \textcolor{preprocessor}{\#include "{}G4EmProcessSubType.hh"{}}}
\DoxyCodeLine{26 \textcolor{preprocessor}{\#include "{}G4PhysicalConstants.hh"{}}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28 \textcolor{preprocessor}{\#include "{}G4ParallelWorldProcess.hh"{}}}
\DoxyCodeLine{29 \textcolor{preprocessor}{\#include "{}G4Gamma.hh"{}}}
\DoxyCodeLine{30 \textcolor{preprocessor}{\#include "{}G4TransportationManager.hh"{}}}
\DoxyCodeLine{31 \textcolor{preprocessor}{\#include "{}G4GeometryTolerance.hh"{}}}
\DoxyCodeLine{32 \textcolor{preprocessor}{\#include "{}G4SystemOfUnits.hh"{}}}
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{preprocessor}{\#include "{}GateConfiguration.h"{}}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{preprocessor}{\#ifdef GATE\_USE\_XRAYLIB}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#include <xraylib.h>}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{39 }
\DoxyCodeLine{40 \textcolor{comment}{// Class Description:}}
\DoxyCodeLine{41 \textcolor{comment}{// Discrete Process -\/-\/ reflection/refraction at interfaces.}}
\DoxyCodeLine{42 \textcolor{comment}{// Class inherits publicly from G4VDiscreteProcess.}}
\DoxyCodeLine{43 \textcolor{comment}{// Class Description -\/ End:}}
\DoxyCodeLine{44 }
\DoxyCodeLine{46 \textcolor{comment}{// Class Definition}}
\DoxyCodeLine{48 \textcolor{comment}{}}
\DoxyCodeLine{49 \textcolor{keyword}{class }\mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}} : \textcolor{keyword}{public} G4VDiscreteProcess \{}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{keyword}{public}:}
\DoxyCodeLine{52 }
\DoxyCodeLine{54     \textcolor{comment}{// Constructors and Destructor}}
\DoxyCodeLine{56 \textcolor{comment}{}}
\DoxyCodeLine{57     \mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}}(\textcolor{keyword}{const} G4String \&processName = \textcolor{stringliteral}{"{}XrayBoundary"{}}, G4ProcessType type = fElectromagnetic);}
\DoxyCodeLine{58     \mbox{\hyperlink{classG4XrayBoundaryProcess}{\string~G4XrayBoundaryProcess}}();}
\DoxyCodeLine{59 }
\DoxyCodeLine{60 \textcolor{keyword}{private}:}
\DoxyCodeLine{61 }
\DoxyCodeLine{62     \mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}}(\textcolor{keyword}{const} \mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}} \&right);}
\DoxyCodeLine{63 }
\DoxyCodeLine{65     \textcolor{comment}{// Operators}}
\DoxyCodeLine{67 \textcolor{comment}{}}
\DoxyCodeLine{68     \mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classG4XrayBoundaryProcess}{G4XrayBoundaryProcess}} \&right);}
\DoxyCodeLine{69 }
\DoxyCodeLine{70 \textcolor{keyword}{public}:}
\DoxyCodeLine{71 }
\DoxyCodeLine{73     \textcolor{comment}{// Methods}}
\DoxyCodeLine{75 \textcolor{comment}{}}
\DoxyCodeLine{76     G4bool IsApplicable(\textcolor{keyword}{const} G4ParticleDefinition \&aParticleType);}
\DoxyCodeLine{77 }
\DoxyCodeLine{78     \textcolor{keywordtype}{void} DoReflection();}
\DoxyCodeLine{79 }
\DoxyCodeLine{80     G4double GetRindex(G4Material *Material, G4double Energy);}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     G4double GetMeanFreePath(\textcolor{keyword}{const} G4Track \&aTrack, G4double , G4ForceCondition *condition);}
\DoxyCodeLine{83     \textcolor{comment}{// Returns infinity; i. e. the process does not limit the step,}}
\DoxyCodeLine{84     \textcolor{comment}{// but sets the 'Forced' condition for the DoIt to be invoked at}}
\DoxyCodeLine{85     \textcolor{comment}{// every step. However, only at a boundary will any action be}}
\DoxyCodeLine{86     \textcolor{comment}{// taken.}}
\DoxyCodeLine{87 }
\DoxyCodeLine{88     G4VParticleChange *PostStepDoIt(\textcolor{keyword}{const} G4Track \&aTrack, \textcolor{keyword}{const} G4Step \&aStep);}
\DoxyCodeLine{89     \textcolor{comment}{// This is the method implementing boundary processes.}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91 \textcolor{keyword}{private}:}
\DoxyCodeLine{92 }
\DoxyCodeLine{93     G4double GetIncidentAngle();}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \textcolor{keyword}{private}:}
\DoxyCodeLine{96     G4double TotalMomentum;}
\DoxyCodeLine{97     G4ThreeVector OldMomentum;}
\DoxyCodeLine{98     G4ThreeVector OldPolarization;}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     G4ThreeVector NewMomentum;}
\DoxyCodeLine{101     G4ThreeVector NewPolarization;}
\DoxyCodeLine{102 }
\DoxyCodeLine{103     G4ThreeVector theGlobalNormal;}
\DoxyCodeLine{104 }
\DoxyCodeLine{105     G4double Rindex1;}
\DoxyCodeLine{106     G4double Rindex2;}
\DoxyCodeLine{107 }
\DoxyCodeLine{108     G4double cost1, cost2, sint1, sint2;}
\DoxyCodeLine{109 }
\DoxyCodeLine{110     G4Material *Material1;}
\DoxyCodeLine{111     G4Material *Material2;}
\DoxyCodeLine{112 }
\DoxyCodeLine{113     G4double kCarTolerance;}
\DoxyCodeLine{114 \};}
\DoxyCodeLine{115 }
\DoxyCodeLine{117 \textcolor{comment}{// Inline methods}}
\DoxyCodeLine{119 \textcolor{comment}{}}
\DoxyCodeLine{120 \textcolor{keyword}{inline}}
\DoxyCodeLine{121 G4bool G4XrayBoundaryProcess::IsApplicable(\textcolor{keyword}{const} G4ParticleDefinition \&aParticleType) \{}
\DoxyCodeLine{122     \textcolor{keywordflow}{return} ( \&aParticleType == G4Gamma::Gamma() );}
\DoxyCodeLine{123 \}}
\DoxyCodeLine{124 }
\DoxyCodeLine{125 \textcolor{keyword}{inline}}
\DoxyCodeLine{126 \textcolor{keywordtype}{void} G4XrayBoundaryProcess::DoReflection() \{}
\DoxyCodeLine{127     G4double PdotN = OldMomentum * theGlobalNormal;}
\DoxyCodeLine{128     NewMomentum = OldMomentum -\/ (2.*PdotN) * theGlobalNormal;}
\DoxyCodeLine{129 \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131 \textcolor{keyword}{inline}}
\DoxyCodeLine{132 \textcolor{preprocessor}{\#ifdef GATE\_USE\_XRAYLIB}}
\DoxyCodeLine{133 G4double G4XrayBoundaryProcess::GetRindex(G4Material *Material, G4double Energy) \{}
\DoxyCodeLine{134 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{135 G4double G4XrayBoundaryProcess::GetRindex(G4Material *Material, G4double) \{}
\DoxyCodeLine{136 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{137     G4double delta = 0.0;}
\DoxyCodeLine{138     G4double Density = Material-\/>GetDensity() / (g / cm3);}
\DoxyCodeLine{139 }
\DoxyCodeLine{140 \textcolor{preprocessor}{\#ifdef GATE\_USE\_XRAYLIB}}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#if XRAYLIB\_MAJOR > 3}}
\DoxyCodeLine{142     xrl\_error *error = NULL;}
\DoxyCodeLine{143     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < Material-\/>GetElementVector()-\/>size(); ++i) \{}
\DoxyCodeLine{144       delta += (1 -\/ Refractive\_Index\_Re(Material-\/>GetElementVector()-\/>at(i)-\/>GetSymbol(), Energy/(keV), 1.0,\&error)) * Material-\/>GetFractionVector()[i];}
\DoxyCodeLine{145       \textcolor{keywordflow}{if} (error != NULL) \{}
\DoxyCodeLine{146     G4cerr << \textcolor{stringliteral}{"{}error message: "{}} << error-\/>message << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{147     xrl\_clear\_error(\&error);}
\DoxyCodeLine{148       \}}
\DoxyCodeLine{149     \}}
\DoxyCodeLine{150 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{151     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i = 0; i < Material-\/>GetElementVector()-\/>size(); ++i)}
\DoxyCodeLine{152       delta += (1 -\/ Refractive\_Index\_Re(Material-\/>GetElementVector()-\/>at(i)-\/>GetSymbol(), Energy/(keV), 1.0)) * Material-\/>GetFractionVector()[i];}
\DoxyCodeLine{153 \textcolor{preprocessor}{\#endif    }}
\DoxyCodeLine{154 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{155     G4Exception( \textcolor{stringliteral}{"{}G4XrayBoundaryProcess::GetRindex"{}}, \textcolor{stringliteral}{"{}GetRindex"{}}, FatalException, \textcolor{stringliteral}{"{}Xraylib is not available\(\backslash\)n"{}});}
\DoxyCodeLine{156 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{157 }
\DoxyCodeLine{158     \textcolor{keywordflow}{return} 1 -\/ delta * Density;}
\DoxyCodeLine{159 \}}
\DoxyCodeLine{160 }
\DoxyCodeLine{161 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* G4XrayBoundaryProcess\_h */}\textcolor{preprocessor}{}}

\end{DoxyCode}
